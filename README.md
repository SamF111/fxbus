# FX Bus

**FX Bus** is a GM-broadcast, client-side visual effects framework for **Foundry Virtual Tabletop v13+**.

It provides a single, deterministic FX “bus” that allows the GM to trigger **purely visual effects** on all connected clients without mutating documents, actors, tokens, scenes, or world state.

This module is designed for **cinematic feedback**, **vehicle motion**, **alerts**, and **environmental effects** in live play.

Effects can be triggered directly from a GM-facing control panel or via macros generated by that panel, ensuring identical behaviour across both workflows. These macros can be embedded into more complex automation, combined to trigger multiple effects simultaneously, or invoked by other modules for more advanced integrations.

---

## Motivation

I wanted a way to shake the screen and add simple, convincing motion to tokens without wading through a large configuration surface.

There are excellent existing solutions – notably **Token Magic FX**, which I still use – but they are designed for a much broader and deeper set of use cases than I personally need during live play. For quick, reactive, cinematic feedback, I often found myself configuring far more than the moment warranted.

I am also not a paid DM. Between Patreon subscriptions, premium modules, and content packs, I already lose money running games. I do not want to spend additional time or money learning, configuring, or maintaining heavyweight FX systems just to get immediate visual feedback.

FX Bus exists to fill that specific gap.

The goal was a system that is:
- **Immediate to use**
- **Simple to reason about**
- **Fast to operate during live play**
- **Hard to misuse**
- **Focused on moment-to-moment narrative impact**, not deep effect authoring

If an effect cannot be started, stopped, and understood immediately, it does not belong here.
The focus of this module is to empower improvisation with visual storytelling.


---

## Demo Video

A high-speed, cyberpunk-style chase sequence viewed from the back of a pickup truck.
The underlying map movement is driven by [**Tile Scroll**](https://foundryvtt.com/packages/tile-scroll), which continuously scrolls the scene tiles to simulate forward motion.

FX Bus is layered on top to provide **camera and screen-level feedback**:

- **Token Oscillation** – active, with rotation disabled, to simulate vehicle suspension and body roll  
- **Screen Vignette** – enabled to focus attention and add cinematic framing  
- **Screen Pulse** – subtle red tint to convey danger and urgency  
- **Screen Shake** – continuous low-amplitude shake for engine vibration and road noise  
- **Screen Streak** – directional motion streaks to reinforce speed

Combined, these effects create the illusion of sustained, high-speed movement without altering scene or token data.

https://github.com/user-attachments/assets/5fc748bb-a636-4ce2-a69e-6184ab9bf4b2

---

## Core Principles

- **Client-side only**  
  All effects run locally on each client using PIXI and `canvas.app.ticker`.

- **No document mutation**  
  No Actors, Tokens, Scenes, or Lights are modified or persisted.

- **Deterministic start / stop**  
  Every effect has explicit start and stop actions. No hidden timers.

- **GM broadcast model**  
  The GM emits one message; all clients render the effect independently.

- **Global kill switch**  
  A single reset action immediately restores all transforms.

---




## Architecture Overview

FX Bus exposes a global runtime on each client:

```js
globalThis.fxbus
```

This runtime:

* Registers a single socket listener
* Dispatches FX messages by action string
* Manages effect-local state and tickers
* Applies and restores PIXI transforms safely

All effects are implemented as **handlers** registered against action names.

---

## Built-in Effects

### Token Oscillation
Applies subtle, continuous motion to selected tokens to simulate vehicles, hovering platforms, unstable footing, or general movement.  
Designed to add life and momentum without distracting from play.

https://github.com/user-attachments/assets/7b4eb845-36e3-4158-bd0c-1e2d0338001e

---

### Screen Shake
Camera shake for impacts, explosions, collisions, or sustained vibration.  
Supports short impulse shakes as well as indefinite “rumble” effects for ongoing events.





https://github.com/user-attachments/assets/87d85156-be8e-4d4c-8a49-24a921f908fb




---

### Screen Pulse
A full-screen colour pulse used for alerts, danger states, environmental effects, or narrative emphasis.  
Can be static or animated, subtle or intense, and layered safely with other effects.

---

### Screen Vignette
A darkened or coloured edge vignette applied to the screen.  
Useful for tension, low-health states, tunnel vision, environmental hazards, or cinematic framing.

---

### Chromatic Aberration
A controlled RGB split effect that can be static or animated.  
Intended for disorientation, digital distortion, magical interference, or high-stress moments.

---

### Screen Noise
A film grain / static overlay applied to the screen.  
Useful for surveillance feeds, damaged optics, corrupted signals, or environmental grit.

---

### Screen Blur
A full-screen post-process blur effect.  
Supports static blur or slow pulsing blur for intoxication, fatigue, shock, or dreamlike sequences.

---

### Screen Smear
A screen-space motion smear that leaves trailing ghosts behind movement.  
Designed for high-speed motion, extreme momentum, or temporal distortion effects.

---

### Screen Streak
Directional motion streaks using temporal feedback.  
Useful for rapid movement, warp effects, velocity emphasis, or cinematic transitions.

---

### Global Reset
An emergency recovery mechanism that immediately stops all active FX and restores the scene to a clean state.  
Intended as a guaranteed escape hatch during live play.


## GM Macros

FX Bus includes GM macros for:

* Token oscillation control
* Screen shake control
* Screen pulse control
* Global reset

All macros use the unified emitter:

```js
globalThis.fxbus.emit({ action: "fx.bus.reset" });
```

Macros do **not** emit directly to sockets.

---

## AI Assistance Disclosure

**This project uses ChatGPT as a development assistant.**

ChatGPT was used to:

* Design the FX Bus architecture
* Draft and refine JavaScript modules
* Debug Foundry VTT lifecycle and PIXI rendering issues
* Iterate on effect behaviour and safety guarantees

All code has been reviewed, tested, and integrated manually by the author.
ChatGPT is used strictly as a **tool**, not as an automated code generator or decision-maker.

---

## Compatibility

* **Foundry VTT:** v13+
* **Core-only** (no system dependencies)
* Designed to coexist cleanly with other FX modules

---

## License
FX Bus is released under the MIT License.

If you fork or build upon this project, attribution in documentation or module metadata is appreciated but not required.

See [`LICENSE`](LICENSE).

---

## Author

**mintchoc**
GitHub: [https://github.com/SamF111/fxbus](https://github.com/SamF111/fxbus)

## Feature Requests

If there is an effect you believe fits the scope of FX Bus, please describe it in the **Feature Requests** issue.

Proposed effects should be:
- Easy to describe in plain language
- Simple to start and stop
- Focused on immediate, cinematic feedback during play

If an effect requires complex configuration, authoring workflows, or persistent state, it likely does not belong in FX Bus.

If the proposal aligns with the goals of the project, I will do my best to implement it.

[Feature Requests](https://github.com/SamF111/fxbus/issues/1)


